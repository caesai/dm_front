# Модуль управления сертификатами (Certificate Management Module)
Данный модуль React отвечает за отображение, проверку статуса и обработку действий с конкретным сертификатом пользователя (просмотр, принятие подаренного сертификата, навигация).
Основные компоненты и логика

### Модуль состоит из нескольких ключевых частей:
1. **isCertificateDisabled** (Функция проверки статуса)
   Функция, обернутая в useCallback, которая определяет, активен ли сертификат.
   Статус "Активен" = status равен 'paid' или 'shared' И текущая дата раньше даты истечения срока (expired_at).
   useCallback используется для мемоизации функции, чтобы она не пересоздавалась при каждом рендере, что важно для её использования в массиве зависимостей useEffect.
2. **acceptCertificate** (Функция принятия сертификата)
   Функция, также обернутая в useCallback, которая обрабатывает логику "принятия" (claim) подаренного сертификата.
   Отправляет POST-запрос через APIPostCertificateClaim.
   В случае успеха обновляет общий список сертификатов пользователя через APIGetCertificates и setCertificates.
   Обрабатывает ошибки с помощью тост-уведомлений.
3. **useEffect** (Загрузка данных при монтировании)
   Хук useEffect, который запускается при монтировании компонента для загрузки данных конкретного сертификата по его id.
   Делает запрос APIGetCertificateById.
   При ошибке загрузки показывает сообщение пользователю и через 6 секунд автоматически перенаправляет на страницу списка сертификатов (/certificates/1).
4. **useEffect** (Основная логика управления состоянием/навигацией)
   Основной и самый сложный хук useEffect, который реагирует на изменения в объекте certificate и управляет потоком пользователя:
   Проверяет, отключен ли сертификат (isCertificateDisabled()).
   Проверяет, прошел ли пользователь онбординг (user?.complete_onboarding).
   Определяет, кто является владельцем/получателем сертификата (customer_id vs recipient_id).
   Автоматически вызывает acceptCertificate() при необходимости или перенаправляет пользователя на нужную страницу (/onboarding/1, /certificates/1).
   Управляет состоянием загрузки (setLoading(false)).

[Назад к списку фич](../../../README.md)
